<!DOCTYPE html>
<html>
<head>
	<title>Driver HUD</title>
	<style>
		* {
			box-sizing: border-box;
		}
		body {
			margin: 0;
		}
		#bg {
			position: absolute;
			top: 0;
			left: 0;
			width: 100vw;
			height: 100vh;
			z-index: -100;
			opacity: 0.3;
			background: url(images/background.jpg) center/cover no-repeat;
		}
		#info {
			position: absolute;
			top: 3vh;
			left: 0;
			width: 100%;
			text-align: center;
			font: 5vw sans-serif;
			background: white;
			border: 2px solid gold;
			padding: 0.5vh;
		}
		#clock {
			font-family: monospace;
		}
		
		/* Webcam is displayed at 4:3, despite actually being 16:9 */
		#camera-container {
			position: absolute;
			bottom: 3vh;
			left: 0;
			width: 100vw;
			height: 75vh;
			text-align: center;
		}
		#camera { 
			width: 100vh; /* Note usage vh, not vw */
			height: 75vh;
			border: 2px solid gold;
			background: black url(images/no-camera.png) center/contain no-repeat;
		}
	</style>
	<script>
		window.onload = function() {
			clockTick();
			setupCamera();
			setInterval(clockTick, 1000);
		}
		
		function clockTick() {
			var d = new Date();
			var hour = ((d.getHours() % 12) || 12);
			//hour = (hour < 10 ? "&nbsp;" : "") + hour; // Pad hour
			var colon = d.getSeconds() % 2 ? ":" : " ";
			var min = (d.getMinutes() < 10 ? "0" : "") + d.getMinutes()
			var amOrPm = d.getHours() >= 12 ? "pm" : "am";
			document.getElementById("clock").innerHTML = hour + colon + min + amOrPm;
		}
		
		function setupCamera() {
			var camera = document.getElementById('camera');
			
			navigator.mediaDevices.getUserMedia({video: true}).then(function(stream) {
				camera.srcObject = stream;
				camera.play();
			});
		}
	</script>
</head>
<body>
	<div id="bg"></div>
	<div id="info">
		88 mph | <span id="clock">--:-- --</span> | 93&deg;F | 53%
	</div>
	<div id="camera-container">
		<video id="camera"></video>
	</div>
</body>
</html>